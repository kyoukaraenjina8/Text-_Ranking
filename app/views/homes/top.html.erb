<%= stylesheet_link_tag '_footer' %>
<%= stylesheet_link_tag 'homes' %>
<div class= "container">
  <div class="row">
    <%= flash[:notice] %>
    <%= image_tag 'pexels-shvets-production-6974921.jpg', size: '1400x700'%>
    <%= "ãƒ†ã‚­ã‚¹ãƒˆé€šã‚Šã«ã‚„ã£ãŸã‚“ã§ã™ã‘ã©ãƒğŸ’¢" %>
  </div>
  <div class="row">

  </div>

    <div class="col-10 offset-2">
    <p>ã€œTextç•ªä»˜ã¸ã‚ˆã†ã“ãã€œ</p>
    
    <p>ãƒ†ã‚­ã‚¹ãƒˆé€šã‚Šã«ã‚„ã£ãŸã®ã«ãªã‚“ã§ã§ã‘ã¸ã‚“ã­ã‚“ï¼ï¼</p>
    <p>
    <p>ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆå­¦è€…ã®æ–¹ã¯ä¸€åº¦ã¯çµŒé¨“ã—ãŸã“ã¨ã‹ã¨æ€ã„ã¾ã™ã€‚
    <p>å­¦ç¿’ã‚’é€²ã‚ã¦ã„ãã¨ã€ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸¸å†™ã—ã—ãŸã‹ã‚‰ã§ãã‚‹ãªã‚“ã¦ãã‚“ãªç”˜ã„ã‚‚ã®ã§ã¯ãªã„ãªã€‚</p>
    <p>ã¨ã€æ°—ã¥ã„ã¦ã„ãã‚‚ã®ã§ã™ãŒã€‚</p>
    
    <p>ãã†ã„ã†åˆå­¦è€…ã®æ–¹ã¸å¯„ã‚Šæ·»ã„ãŸã„ã€æœ€åˆã®ãƒ†ã‚­ã‚¹ãƒˆã¯ã‚ã‹ã‚Šã‚„ã™ã„ã‚‚ã®ã‚’æ‰‹ã«å–ã£ã¦æ¬²ã—ã„ã€‚</p>
    <p>ãã‚“ãªæƒ³ã„ã§åˆå­¦è€…å‘ã‘ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½¿ç”¨è€…ã®çš†ã•ã‚“ã®è©•ä¾¡é †ã«ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«ã—ã¾ã—ãŸã€‚</p>
    
    <p>ã ã‹ã‚‰å„ªã—ã„ãƒ”ãƒ³ã‚¯ã¨ãƒ™ãƒ¼ã‚¸ãƒ¥ã®ã‚«ãƒ©ãƒ¼ãƒªãƒ³ã‚°ãªã‚ã‘ã§ã™ã€‚ã¡ã‚‡ã£ã¨ã§ã‚‚å¿ƒãŒè»½ããªã‚‹ã‚ˆã†ã«ã€‚</p>
  </div>
  <div class="row mt-5">
    <h1>Ranking</h1>
    <% @posts.each.with_index(1) do |post, i| %>
    <div class="col text-center">
      <strong><h1><%= "ç¬¬#{i}ä½ #{post.ranking}"  %></h1></strong>
    </div>
  </div>
  <div class="row mt-5">
    <div class="col-3">
      <p>æŠ•ç¨¿è€…åï¼š<%= post.user.name %>ã•ã‚“</p>
      <%= link_to post_path(post.id) do %>
        <%= image_tag post.get_image(150, 150) %>
      <% end %>
      <P><%= link_to "ãƒ†ã‚­ã‚¹ãƒˆã®è©³ç´°ã‚’ãƒã‚§ãƒƒã‚¯", post_path(post.id) %></P>
    </div>
   <div class="col-6">
      <div class="box-title"> <%= post.text_name %></div>
      <p>æŠ•ç¨¿æ—¥ï¼š<%= post.created_at.strftime('%Y/%m/%d') %>ã€€ã€€ä¾¡æ ¼ï¼š<%= post.price %>å††</p>
      <p>å•†å“èª¬æ˜ï¼š<%= word_wrap(post.introduction, line_width: 30) %></p>
      <p>ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼š<%= word_wrap(post.review, line_width: 30) %></p>
    </div>

    <div class="col-3 text-center">
      <h4><%= 'ã¿ã‚“ãªã®è©•ä¾¡' %></h4></br>
      <%= 'ç·åˆè©•ä¾¡' %><%= post.comments.average(:total_score).to_f.round(1) %>
        <div id="post_raty_<%= post.id %>" data-score="<%= post.comments.average(:total_score).to_f.round(1) %>"></div>
        <script>
              // scriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã©ã®idã®éƒ¨åˆ†ã«é…ç½®ã™ã‚‹ã‹ã‚’æŒ‡å®š
        raty(document.querySelector('#post_raty_<%= post.id %>'),
            {
              starOn: "<%= asset_path('star-on.png') %>",
              starOff: "<%= asset_path('star-off.png') %>",
              starHalf: "<%= asset_path('star-half.png') %>",
              score: <%= post.comments.average(:total_score).to_f.round(1) %>,
              readOnly: true,
              half: true,
        //æ˜Ÿç”»åƒã®æŒ‡å®šãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã“ã“ã«è¨˜è¿°,
            }
        );
        </script>

        <%= 'èª­ã¿ã‚„ã™ã•' %>
        <div id="read_score_raty_<%= post.id %>" data-score="<%= post.comments.average(:read_score).to_f.round(1) %>"></div>
        <script>
          // scriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã©ã®idã®éƒ¨åˆ†ã«é…ç½®ã™ã‚‹ã‹ã‚’æŒ‡å®š
          raty(document.querySelector('#read_score_raty_<%= post.id %>'),
              {
                starOn: "<%= asset_path('star-on.png') %>",
                starOff: "<%= asset_path('star-off.png') %>",
                starHalf: "<%= asset_path('star-half.png') %>",
                score: <%= post.comments.average(:read_score).to_f.round(1) %>,
                readOnly: true,
                half: true,
          //æ˜Ÿç”»åƒã®æŒ‡å®šãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã“ã“ã«è¨˜è¿°,
              }
          );
        </script>

        <%= 'ä¾¡æ ¼ã®å¦¥å½“æ€§' %>
        <div id="price_score_raty_<%= post.id %>" data-score="<%= post.comments.average(:price_score).to_f.round(1) %>"></div>
        <script>
          // scriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã©ã®idã®éƒ¨åˆ†ã«é…ç½®ã™ã‚‹ã‹ã‚’æŒ‡å®š
          raty(document.querySelector('#price_score_raty_<%= post.id %>'),
              {
                starOn: "<%= asset_path('star-on.png') %>",
                starOff: "<%= asset_path('star-off.png') %>",
                starHalf: "<%= asset_path('star-half.png') %>",
                score: <%= post.comments.average(:price_score).to_f.round(1) %>,
                readOnly: true,
                half: true,
          //æ˜Ÿç”»åƒã®æŒ‡å®šãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã“ã“ã«è¨˜è¿°,
              }
          );
        </script>

        <%= 'å®Ÿç”¨åº¦' %>
        <div id="usability_score_raty_<%= post.id %>" data-score="<%= post.comments.average(:usability_score).to_f.round(1) %>"></div>
        <script>
          // scriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã©ã®idã®éƒ¨åˆ†ã«é…ç½®ã™ã‚‹ã‹ã‚’æŒ‡å®š
          raty(document.querySelector('#usability_score_raty_<%= post.id %>'),
              {
                starOn: "<%= asset_path('star-on.png') %>",
                starOff: "<%= asset_path('star-off.png') %>",
                starHalf: "<%= asset_path('star-half.png') %>",
                score: <%= post.comments.average(:usability_score).to_f.round(1) %>,
                readOnly: true,
                half: true,
          //æ˜Ÿç”»åƒã®æŒ‡å®šãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã“ã“ã«è¨˜è¿°,
              }
          );
        </script>
    </div>
  </div>

  <div class="row">
    <div class="col mt-5">
      <h4>ã™ã¹ã¦ã®ã‚³ãƒ¡ãƒ³ãƒˆ</h4><%= link_to "ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆã®æŠ•ç¨¿ã¯ã“ã¡ã‚‰ï¼‰", post_path(post.id) %>
    </div>
  </div>

  <div class="row scroll">
    <% post.comments.each do |comment| %>
      <div class="col-3 mt-5">
      <p>æŠ•ç¨¿è€…åï¼š<%= comment.user.name %></p>
      <p>ã‚³ãƒ¡ãƒ³ãƒˆï¼š<%= comment.comment_introduction %></p>
      <% if comment.user == current_user %>
          <%= link_to "å‰Šé™¤", post_comment_path(post, comment.id), method: :delete %>
      <% end %>

      <%= 'ç·åˆè©•ä¾¡' %>
      <div id="comment_raty_<%= comment.id %>" data-score="<%= comment.total_score %>"></div>
        <script>
        raty(document.querySelector('#comment_raty_<%= comment.id %>'),
            {
              starOn: "<%= asset_path('star-on.png') %>",
              starOff: "<%= asset_path('star-off.png') %>",
              starHalf: "<%= asset_path('star-half.png') %>",
              score: <%= comment.total_score %>,
              readOnly: true,
              half: true,
        //æ˜Ÿç”»åƒã®æŒ‡å®šãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã“ã“ã«è¨˜è¿°,
            }
        );
        </script>

      <%= 'èª­ã¿ã‚„ã™ã•' %>
      <div id="comment_read_score_raty_<%= comment.id %>" data-score="<%= comment.read_score %>"></div>
        <script>
        raty(document.querySelector('#comment_read_score_raty_<%= comment.id %>'),
            {
              starOn: "<%= asset_path('star-on.png') %>",
              starOff: "<%= asset_path('star-off.png') %>",
              starHalf: "<%= asset_path('star-half.png') %>",
              score: <%= comment.read_score %>,
              readOnly: true,
              half: true,
        //æ˜Ÿç”»åƒã®æŒ‡å®šãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã“ã“ã«è¨˜è¿°,
            }
        );
        </script>

      <%= 'ä¾¡æ ¼ã®å¦¥å½“æ€§' %>
      <div id="comment_price_score_raty_<%= comment.id %>" data-score="<%= comment.price_score %>"></div>
        <script>
        raty(document.querySelector('#comment_price_score_raty_<%= comment.id %>'),
            {
              starOn: "<%= asset_path('star-on.png') %>",
              starOff: "<%= asset_path('star-off.png') %>",
              starHalf: "<%= asset_path('star-half.png') %>",
              score: <%= comment.price_score %>,
              readOnly: true,
              half: true,
        //æ˜Ÿç”»åƒã®æŒ‡å®šãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã“ã“ã«è¨˜è¿°,
            }
        );
        </script>

      <%= 'å®Ÿç”¨åº¦' %>
      <div id="comment_usability_score_raty_<%= comment.id %>" data-score="<%= comment.usability_score %>"></div>
        <script>
        raty(document.querySelector('#comment_usability_score_raty_<%= comment.id %>'),
            {
              starOn: "<%= asset_path('star-on.png') %>",
              starOff: "<%= asset_path('star-off.png') %>",
              starHalf: "<%= asset_path('star-half.png') %>",
              score: <%= comment.usability_score %>,
              readOnly: true,
              half: true,
        //æ˜Ÿç”»åƒã®æŒ‡å®šãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã“ã“ã«è¨˜è¿°,
            }
        );
        </script>
      </div>
    <% end %>
  </div>
  <% end %>
</div>